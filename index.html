<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora estequiom√©trica inteligente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <div class="app-inner">

      <header class="header">
        <div class="title-block">
          <h1>Calculadora estequiom√©trica inteligente</h1>
        </div>
      </header>

      <main class="grid">

        <!-- SECCI√ìN 1: REACCI√ìN -->
        <section class="card">
          <div class="card-header">
            <h2 class="card-title">1 ¬∑ Definir reacci√≥n</h2>
          </div>

          <p class="hint" style="margin-top:-4px; margin-bottom:12px;">
            Introduce los reactivos y productos de la reacci√≥n qu√≠mica.
            Puedes a√±adir tantas sustancias como necesites.
            La calculadora ajustar√° la ecuaci√≥n y mostrar√° las masas molares.
          </p>

          <div class="reaction-grid">
            <!-- REACTIVOS -->
            <div class="reaction-column">
              <h3 class="column-title">Reactivos</h3>

              <div id="reactants-list" class="rows">
                <!-- Fila 1 -->
                <div class="rowline">
                  <input type="text" class="species-input" data-side="reactivo"
                         placeholder="Ej: H2, Fe2(SO4)3, C6H12O6..." />
                  <button type="button" class="icon-btn remove-species" aria-label="Quitar" title="Quitar">üóëÔ∏è</button>
                </div>

                <!-- Fila 2 -->
                <div class="rowline">
                  <input type="text" class="species-input" data-side="reactivo"
                         placeholder="Opcional" />
                  <button type="button" class="icon-btn remove-species" aria-label="Quitar" title="Quitar">üóëÔ∏è</button>
                </div>
              </div>

              <button id="add-reactant" type="button" class="btn-tertiary" style="margin-top:8px;">
                + A√±adir reactivo
              </button>
            </div>

            <div class="reaction-arrow">‚Üí</div>

            <!-- PRODUCTOS -->
            <div class="reaction-column">
              <h3 class="column-title">Productos</h3>

              <div id="products-list" class="rows">
                <!-- Fila 1 -->
                <div class="rowline">
                  <input type="text" class="species-input" data-side="producto"
                         placeholder="Ej: H2O, CO2, NaCl..." />
                  <button type="button" class="icon-btn remove-species" aria-label="Quitar" title="Quitar">üóëÔ∏è</button>
                </div>

                <!-- Fila 2 -->
                <div class="rowline">
                  <input type="text" class="species-input" data-side="producto"
                         placeholder="Opcional" />
                  <button type="button" class="icon-btn remove-species" aria-label="Quitar" title="Quitar">üóëÔ∏è</button>
                </div>
              </div>

              <button id="add-product" type="button" class="btn-tertiary" style="margin-top:8px;">
                + A√±adir producto
              </button>
            </div>
          </div>

          <button id="btn-balance" class="btn-primary" style="margin-top:12px;">
            Ajustar reacci√≥n y calcular masas molares
          </button>

          <p id="balance-error" class="error-msg"></p>

          <div id="balanced-info" class="balanced-info hidden">
            <div class="balanced-equation">
              <span class="section-label">Ecuaci√≥n ajustada:</span>
              <span id="balanced-equation-text"></span>
            </div>

            <div class="molar-masses" style="margin-top:8px;">
              <span class="section-label">Masas molares:</span>
              <ul id="molar-mass-list"></ul>
            </div>
          </div>

          <button id="reset-reaction" class="btn-reset">Reiniciar</button>
        </section>

        <!-- SECCI√ìN 2: MASA / MOLES -->
        <section class="card">
          <div class="card-header">
            <h2 class="card-title">2 ¬∑ C√°lculo</h2>
          </div>

          <p class="hint">
            Elige la sustancia conocida y el tipo de dato (masa o moles).
            Luego selecciona la sustancia a calcular y si quieres el resultado en masa o en moles.
          </p>

          <div class="field">
            <span class="field-label">Sustancia conocida</span>
            <select id="known-species">
              <option value="">‚Äî Selecciona ‚Äî</option>
            </select>
          </div>

          <div class="field">
            <span class="field-label">Dato conocido</span>
            <select id="known-type">
              <option value="mass">Masa (g)</option>
              <option value="moles">Moles (mol)</option>
            </select>
          </div>

          <!-- Bloque masa conocida -->
          <div id="known-mass-block" class="field">
            <span class="field-label">Masa conocida (g)</span>
            <input id="known-mass" type="text" inputmode="decimal" placeholder="Ej: 5 √≥ 5,5" />
          </div>

          <!-- Bloque moles conocidos -->
          <div id="known-moles-block" class="field hidden">
            <span class="field-label">Moles conocidos (mol)</span>
            <input id="known-moles" type="text" inputmode="decimal" placeholder="Ej: 0,25" />
          </div>

          <div class="field">
            <span class="field-label">Sustancia a calcular</span>
            <select id="target-species">
              <option value="">‚Äî Selecciona ‚Äî</option>
            </select>
          </div>

          <div class="field">
            <span class="field-label">Quiero el resultado en</span>
            <select id="target-type">
              <option value="mass">Masa (g)</option>
              <option value="moles">Moles (mol)</option>
            </select>
          </div>

          <button id="btn-calc" class="btn-secondary">
            Calcular
          </button>

          <p id="calc-error" class="error-msg"></p>

          <div id="result-box" class="result-box hidden">
            <p class="result-main">
              <span class="section-label">Resultado:</span>
              <span id="result-text"></span>
            </p>
          </div>

          <button id="btn-show-conversion" class="btn-tertiary hidden">
            Mostrar conversi√≥n
          </button>

          <div id="conversion-box" class="result-box hidden">
            <p class="result-main">
              <span class="section-label">Conversi√≥n completa:</span>
            </p>
            <div id="conversion-text" class="result-detail mono"></div>
          </div>

          <button id="reset-mass" class="btn-reset">Reiniciar</button>
        </section>

      </main>

      <footer class="footer">
        <span>Autor: Samuel L√≥pez Meli√°n</span>
      </footer>

    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
